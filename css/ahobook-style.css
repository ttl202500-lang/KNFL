:root {
    --aho-bg: #fdfaf7;
    --aho-text: #333;
    --aho-height: 600px; /* Default desktop height */
    --aho-mobile-height: 80vh;
}

.ahobook-wrapper {
    position: relative;
    width: 100%;
    max-width: 1000px; /* Desktop Spread */
    margin: 20px auto;
    font-family: 'Georgia', serif;
    background: #eee;
    padding: 10px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Toolbar */
.ahobook-toolbar {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    background: #fff;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.ahobook-btn {
    background: none;
    border: 1px solid #ddd;
    border-radius: 3px;
    cursor: pointer;
    padding: 5px 10px;
    font-size: 16px;
    transition: all 0.2s;
}
.ahobook-btn:hover { background: #f0f0f0; }

/* Viewport - The 3D Scene */
.ahobook-viewport {
    width: 100%;
    height: var(--aho-height);
    position: relative;
    perspective: 2000px;
    overflow: hidden;
    background: #ccc; /* Backdrop */
}

.ahobook-stage {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
}

/* Pages */
.ahobook-page {
    position: absolute;
    top: 0;
    width: 50%; /* Desktop: 2 pages side-by-side usually, but for simpler flip logic we might center one or use 50% split. Let's start with single page view for mobile-first simplicity, or 50% for desktop book feel. Let's do Single Page Centered for robust content flow, simpler to paginate. Wait, Book implies 2 pages. Let's stick to Single View for Mobile First "Flip" feel (like Kindle app) which is often better for dynamic text. */
    /* Decision: Single Page View centered is safer for dynamic text pagination than complex 2-page spreads which break easily. */
    width: 100%; 
    height: 100%;
    background-color: var(--aho-bg);
    color: var(--aho-text);
    padding: 40px;
    box-sizing: border-box;
    overflow: hidden; /* Text shouldn't spill */
    border: 1px solid #ddd;
    box-shadow: inset 20px 0 50px rgba(0,0,0,0.05); /* Paper curve shadow */
    
    /* 3D setup */
    backface-visibility: hidden;
    transform-origin: left center;
    transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
    
    display: none; /* Hide by default */
    z-index: 1;
}

/* Page Content Styling */
.ahobook-page p { line-height: 1.6; margin-bottom: 1em; }
.ahobook-page img { max-width: 100%; height: auto; display: block; margin: 0 auto; }
.ahobook-page h1, .ahobook-page h2 { margin-top: 0; color: #222; }

/* Active States */
.ahobook-page.active {
    display: block;
    z-index: 2;
    transform: rotateY(0deg);
}
.ahobook-page.flipped {
    display: block;
    transform: rotateY(-180deg);
    z-index: 3; /* On top during flip */
}
.ahobook-page.next-stack {
    display: block;
    z-index: 1;
    transform: rotateY(0deg); /* Waiting behind */
}

/* Fullscreen */
.ahobook-wrapper.fullscreen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    max-width: none;
    z-index: 9999;
    margin: 0;
    background: #222;
    padding: 0;
}
.ahobook-wrapper.fullscreen .ahobook-viewport {
    height: calc(100vh - 50px);
    background: #222;
}
.ahobook-wrapper.fullscreen .ahobook-page {
    max-width: 800px; /* Reading limit */
    margin: 0 auto;
    left: 0; right: 0;
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .ahobook-viewport {
        height: var(--aho-mobile-height);
    }
    .ahobook-page {
        padding: 20px;
    }
}